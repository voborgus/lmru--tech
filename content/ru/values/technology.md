---
title: "Технологии"
weight: 30
type: docs
description: Постоянно челленджим выбор технологий.
---

### 1. Весь код соответствует минимальным [требованиям InnerSource](https://adeo.github.io/innersource/).

* Код доступен для каждого сотрудника и хранится в GitHub.
* Несоответствие требованиям InnerSource объявляется техническим долгом и устраняется.
* Код-ревью обязателен.

#### Практики и ритуалы: 
{{< glossary title="Правило 30%" >}}
Каждый инженер может использовать часть своего рабочего времени на исследовательские задачи, на работу над тех. долгом или обучение.
Количество процентов примерное и должно определяться техническим лидером совместно с продуктовой командой.
{{< /glossary >}}
{{< glossary title="Правило Бойскаута" source="https://deviq.com/boy-scout-rule/" >}}
У настоящих бойскаутов есть правило о поляне, которую они должны оставить чище, чем оно было до их прихода.

Наша версия: **оставь код в лучшем состоянии, чем то, каким он был до тебя.**
Как [говорил Дядюшка Боб](https://www.oreilly.com/library/view/97-things-every/9780596809515/ch08.html), *не причёсывание беспорядка в коде должно быть так же плохо и социально неодобримо, как если бы человек мусорил на улице.*
{{< /glossary >}}
{{< glossary title="Правила контрибьюции" source="https://adeo.github.io/innersource" >}}
В каждом репозитории описаны соглашения о том, как они обрабатывают изменения в коде. Например, работа с пулл реквестами, процесс код-ревью и настройки защищенных веток в гите.
{{< /glossary >}}

{{< alert color="warning" title="Антипаттерн" >}}Закрытый репозиторий без readme файла и мейнтенеров работает в продакшене.{{< /alert >}}

---

### 2. Мы автоматизируем по возможности всё.

* Мы предпочитаем автотесты ручному тестированию.
* Билд и деплой осуществляется с помощью CI инструментов.

#### Практики и ритуалы: 
{{< glossary title="DevOps" >}}
Дружба между разработчиками и опсами :) Если серьёзно, то хочу порекомендовать [книгу](https://www.amazon.com/Phoenix-Project-DevOps-Helping-Business/dp/0988262592) для полного понимание этого термина.

Мы практикуем религию DevOps как основной подход к построению продукта.
{{< /glossary >}}
{{< glossary title="IaC" >}}
Infrastructure as a Code — Инфраструктура как Код. Мы предпочитаем автоматические конфигурационные файлы простому накликиванию через веб-интерфейс. Эти файлы содержат сценарий подготовки инфраструктуры, билда и деплоя приложения.
{{< /glossary >}}

{{< alert color="warning" title="Антипаттерн" >}}Страшно делать релиз по причине большого объема ручного труда и редкого события.{{< /alert >}}

---

### 3. Выбор технологии согласован с [Таблицей Технологий]({{< ref "/stack" >}}).

* Таблица поддерживается обновлённой Технологическим Комитетом.
* Все движения в основной таблице зарегистрированы в таблице движений.
* Мы поддерживаем инициативу попробовать новую технологию или подход с оповещением Комитета.

#### Практики и ритуалы: 
{{< glossary title="Технологический Комитет" >}}
Комитет представляет собой сообщество корпоративных архитекторов, технических архитекторов и технических лидеров разработки и ИТ-инфраструктуры. Цель — выбор и рекомендации по использованию технологий в Леруа Мерлен для повышения эффективности использования ресурсов компании. Технологии включают в себя языки программирования, платформы и библиотеки, инструменты и подходы в контексте конкретных сценариев использования.

Встречи проводятся по меньшей мере раз в месяц. Лидер движения — СТО.
{{< /glossary >}}

{{< alert color="warning" title="Антипаттерн" >}}Менеджер заказал внешней компании разработать неподдерживаемое приложение чёрный ящик на 1С.{{< /alert >}}

---

### 4. Фронтовые приложения следуют [Дизайн Системе](https://fronton.leroymerlin.ru/).
<i class="fa fa-lock mr-1"></i> <i>Дизайн система доступна пока только из внутренней сети</i>

* Все бизнес настройки конфигурируемы через веб-интерфейс.

{{< glossary title="Дизайн Система" source="https://vc.ru/flood/36947-chto-takoe-dizayn-sistemy-i-gde-oni-primenyayutsya">}}
Дизайн-система — это набор правил и инструментов для визуального и технического исполнения, который отражает философию продукта и постоянно развивается.
{{< /glossary >}}

{{< alert color="warning" title="Антипаттерн" >}}Созданное в магазине приложение использует шрифт Comic Sans.{{< /alert >}}

---

### 5. Мы строим надежные приложения и инфраструктуру.

* Мы узнаём о проблемах в проде быстрее пользователей.
* Мы предпочитаем stateless приложения и запускем их в контейнерах используя оркестратор контейнеров.
* Приложения корректно переносят частичные отказы.
* Приложения и базы данных реплицированы и поддердивают шардинг.
* Приложения корректно обрабатывают некорректные входящие запросы и отдают только корректные ответы.
* Сервисы предоставляют и контролируют <abbr data-toggle="tooltip" title="Service Level Objective — целевой уровень обслуживания, который провайдер сервиса стремится достичь.">SLO</abbr>.
* Инфраструктура ключевых систем построена по принципу мастер-мастер репликации.

#### Практики и ритуалы:
{{< glossary title="VALET" source="https://landing.google.com/sre/workbook/chapters/slo-engineering-case-studies/" >}}
Гугловский способ измерения SLO. 

* Volume (traffic) — Объём трафика — какой обьём бизнес транзакций сервис может обработать?
* Availability — Доступность — насколько сервис готов бесперебойно обслуживать посетителей?
* Latency — Задержка — насколько быстро отвечает сервис?
* Errors — Ошибки — правильно ли сервис обрабатывает ошибки?
* Tickets — Тикеты — насколько часто необходимо обслуживать сервис в ручном режиме?
{{< /glossary >}}
{{< glossary title="Фича флаги">}}
Ещё называют feature toggling. Подход, при котором новая функциональность добавляется как подключаемый модуль,
который можно отключить в любой момент.
{{< /glossary >}}
{{< glossary title="Распределённый Трейсинг" >}}
Каждый запрос на входе получает уникальный трейс ID и этот идентификатор передаётся в каждом последующем вызове.
{{< /glossary >}}
{{< glossary title="Телеметрия" >}}
Приложения выставляют наружу эндпоинт с показателями жизни (метриками) для анализа и мониторинга.
{{< /glossary >}}

{{< alert color="warning" title="Антипаттерн" >}}Клиент не может сделать заказ по причине сломанной системы по отправке электронной почты.{{< /alert >}}

---

### 6. Тестирование так же важно, как и разработка.

* Тестирование начинается на этапе формирования требований.
* В каждой продуктовой команде –– как минимум один QA-инженер.
* Код покрывается тестами сразу. Тесты пишутся сразу, а не откладываются в бэклог.

#### Практики и ритуалы: 
{{< glossary title="Динамические тестовые окружения" >}}
Тестирование системы проводится на динамически поднятом тестовом окружении. Такое окружение включает в себя все зависимости, необходимые для тестирования (внешние зависимости рекомендуется заменять моками). Доступ к таким окружениям ограничен для предотвращения влияния на процесс тестирования. По окончании тестирования окружение удаляется.
{{< /glossary >}}
{{< glossary title="Мокирование" >}}
Во избежание зависимости от внешних систем (нестабильное поведение, ограниченный или отсутствующий контроль над тестовыми данными), для тестирования используется мокирование таких систем.
Мок — это эмулятор системы, который повторяет ее поведение в необходимом объеме, но не воспроизводит внутреннюю логику.
{{< /glossary >}}
{{< glossary title="Тестирование производительности" >}}
Вид тестирования, при котором тестируется не логика системы, а ее быстродействие.

В качестве критериев производительности бэкэнда используются следующие метрики:
* Количество запросов в секунду
* Время отклика, мс
* Процент ошибок, %
* Утилизация ресурсов системы, %

Для тестирования производительности фронтэнда используется Google Lighthouse и его метрики.
Бекэнд рекомендуется тестировать при помощи Gatling.
{{< /glossary >}}
{{< glossary title="Канареечное развертывание" >}}
Канареечное развертывание помогает снизить негативное воздействие релизов, в которых пропущены баги. Эта стратегия заключается в том, что сначала изменение развертывается на небольшом подмножестве серверов, тестируется, а затем развертывается на остальных серверах. [Читать больше](https://octopus.com/docs/deployment-patterns/canary-deployments#:~:text=Canary%20deployments%20are%20a%20pattern,the%20rest%20of%20the%20servers.)
{{< /glossary >}}

{{< alert color="warning" title="Антипаттерн" >}}Функциональное тестирование на продакшене создает реальные инциденты{{< /alert >}}
