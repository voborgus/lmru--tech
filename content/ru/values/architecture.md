---
title: "Архитектура"
weight: 20
type: docs
description: Строим долгосрочные решения и боремся техническим долгом.
---

{{% pageinfo color="warning" %}}
<h4>Работа в процессе</h4><br />
Контент всё ещё создается: набор ценностей пока не подтверждён и ещё не пригоден для использования. <br /><br />
{{% /pageinfo %}}

### 1. Мы заботимся о чистоте API.

* Мы выставляем сервисы наружу для других команд через API и Портал Разработчиков.
* Мы следуем [Принципам Построения API]({{< ref "/api" >}}). 
Несоответсвующие принципам API должны быть объявлены техническим долгом и поправлены.
* <abbr data-toggle="tooltip" title="Сервис это приложение, но не все приложения — сервисы. Например, фронтенд — это не сервис.">Сервисы</abbr> не должны предоставлять клиентскую библиотеку. API и модель данных выражается через REST и JSON. <abbr  data-toggle="tooltip" title="Общие внутренние зависимости ведут со временем к излишней связности и дополнительной сложности.">[?]</abbr>.

#### Практики и ритуалы:
{{< glossary title="Правило 30%" >}}
Каждый инженер может использовать часть своего рабочего времени на исследовательские задачи, на работу над тех. долгом или обучение.
Количество процентов примерное и должно определяться техническим лидером совместно с продуктовой командой.
{{< /glossary >}}

{{< alert color="warning" title="Антипаттерн" >}}GraphQL или GRPC эндпоинт выставленный для внешнего использоования. <sup>[[Смотри технологическую ценность]]({{< ref "technology/#3-выбор-технологии-согласован-с-таблицей-технологийhahahugoshortcode-s6-hbhb" >}})</sup>{{< /alert >}}

---

### 2. Мы используем модулярную архитектуру и избегаем излишнюю связность между продуктами. 

* <abbr data-toggle="tooltip" title="Когда мы говорим о «Модулярности» или «Микросервисах», мы имеем в виду набор архитектурных паттернов.">Модули</abbr> изолированы и слабо связанны.
* Модули имеют единую ответственность.
* Мы можем выкидывать существующий, добавлять новый,
или изменять последовательность выполнения модулей безопасно без влияния на соседнюю функциональность.
* Мы периодически ревьювим важные вопросы архитектуры и технического долга.

#### Практики и ритуалы:
{{< glossary title="Архитектурный Комитет" >}}
Встреча Enterprise & Solution архитекторов. Проводится по требованию. Лидер - технический директор.

Основные задачи:
* решение проблем архитектуры
* место эскалации для архитектурных пробелов или роста технического долга
* разблокирование задач технического долга
* консультирование по архитектуре решений
{{< /glossary >}}
{{< glossary title="High Cohesion" source="https://stackoverflow.com/questions/10830135/what-is-high-cohesion-and-how-to-use-it-make-it" >}}
High Cohesion - это когда класс (или модуль), выполняет четко определенную работу. Low Cohesion - это когда класс выполняет много всего разного.
{{< /glossary >}}
{{< glossary title="Внешняя конфигурация" >}}
Изменяемая конфигурация должна храниться в окружении.
{{< /glossary >}}
{{< glossary title="Оркестрация / Хореография" >}}
Микросервисный паттерн для построения последовательности выполнений (САГА). Больше информации тут [тут](https://medium.com/ingeniouslysimple/choreography-vs-orchestration-a6f21cfaccae), или ещё больше [тут](https://microservices.io/patterns/data/saga.html).
{{< /glossary >}}

{{< alert color="warning" title="Antipattern" >}}Mикросервисы с захардкоженными шагами и несколькими точками входа.{{< /alert >}}

---

### 3. Мы разрабатываем только экономически оправданные продукты.

* Мы избегаем дублирования функциональности систем.
* Каждая система имеет команду мейнтейнеров, отвечающих за неё.

#### Практики и ритуалы:
{{< glossary title="Соотношение доходов и расходов" >}}
Для каждого продукта или фичи до начала работ должно быть посчитано соотношение заработанных потраченных на раазработку денег.
{{< /glossary >}}
{{< glossary title="KISS" >}}
Keep It Stupid Simple. Как говорил старина Оккам, «[не стоит множить сущее без необходимости](https://en.wikipedia.org/wiki/Occam%27s_razor)». 
Добавление новых уровней абстракции должно иметь вескую причину. Добавление новых объектов данных или компонентов решения также должно иметь веские основания. Упрощение - это хорошо, и это приветствуем. Излишнюю сложность следует признать архитектурным долгом и переработать.
{{< /glossary >}}
{{< glossary title="DRY" >}}
Do Not Repeat Yorself — Не повторяй сам себя. Иначе говоря, мы не разрабатываем несколько систем, модулей, микросервисов или компонентов с одинаковым предназначением.
{{< /glossary >}}

{{< alert color="warning" title="Antipattern" >}}Убыточный продукт продолжает разрабатываться 
в течении долгого времени просто потому что сложно признать ошибку. <sup>[[Смотри ценность в разделе Люди]]({{< ref "people/#2-мы-принимаем-ошибки-и-учимся-на-них" >}})</sup>{{< /alert >}}
